:root{--bg:#eaffd6;--panel:#d7ffd1;--accent:#2aa461;--accent-dark:#14804a;--text:#184d2b;--white:#fff;--shadow:rgba(0,0,0,.15)}
*{box-sizing:border-box}
html,body{height:100%}
body{margin:0;font-family:"Pretendard",system-ui,-apple-system,Segoe UI,Roboto,sans-serif;background:var(--bg);color:var(--text)}
.app-header{display:flex;justify-content:center;align-items:center;padding:8px 12px}
.app-header h1{margin:8px 0;font-size:28px;color:var(--accent-dark)}

.hud{display:flex;gap:12px;align-items:center;justify-content:flex-start;margin:10px auto;padding:10px 12px;max-width:920px;background:var(--panel);border-radius:10px;box-shadow:0 2px 8px var(--shadow)}
.hud .btn{margin-left:auto}
.score,.timer{font-weight:700}
/* 텍스트 타이머는 숨김 (우측 바 타이머 사용) */
.hud .timer{display:none}

.btn{border:1px solid var(--accent);background:var(--white);color:var(--accent-dark);padding:8px 12px;border-radius:18px;cursor:pointer}
.btn:hover{filter:brightness(.98)}
.btn-primary{background:var(--accent);color:var(--white)}

.board-wrap{position:relative;margin:0 auto;max-width:960px;padding:12px;display:flex;gap:12px;align-items:flex-start;justify-content:center}
.status{display:none}
.board{position:relative;width:840px;height:480px;margin:0 auto;border-radius:12px;background:repeating-linear-gradient(45deg,#bff3a6,#bff3a6 16px,#b2eda0 16px,#b2eda0 32px);box-shadow:inset 0 0 0 2px rgba(0,0,0,.06),0 6px 20px var(--shadow);overflow:hidden}

/* Grid (15 x 8) */
.cell{position:absolute;width:48px;height:48px;display:flex;align-items:center;justify-content:center}
.cell.transparent{opacity:0;pointer-events:none}

/* Apple token (previous style) */
.apple{position:relative;width:44px;height:44px;border-radius:50%;display:flex;align-items:center;justify-content:center;background:radial-gradient(circle at 30% 30%, #ff7a6a, #e4372b 60%, #c81f19);color:#fff;font-weight:700;font-size:16px;user-select:none;-webkit-user-drag:none}
.apple:before{content:"";position:absolute;top:-6px;left:50%;transform:translateX(-50%) rotate(-20deg);width:16px;height:10px;border-radius:0 0 10px 10px;background:#2f7d3a}

/* Selection ring */
.selected .apple{outline:3px solid #ffd54a;outline-offset:-3px}

/* Drag rectangle - match mouse bounds exactly */
.drag-rect{position:absolute;border:2px solid #111;box-sizing:border-box;border-radius:6px;background:rgba(0,0,0,.06);pointer-events:none}
.hidden{display:none}

/* 드래그 사각형을 항상 셀 위에 표시 */
.drag-rect{z-index:1000}

.rules{max-width:920px;margin:16px auto 32px;padding:10px 12px;color:#355e45}
.start-screen{max-width:960px;margin:0 auto;padding:24px 12px}
.start-inner{position:relative;height:520px;border-radius:16px;background:repeating-linear-gradient(45deg,#bff3a6,#bff3a6 16px,#b2eda0 16px,#b2eda0 32px);box-shadow:inset 0 0 0 2px rgba(0,0,0,.06),0 6px 20px var(--shadow);padding:24px}
.start-inner .brand{color:#2aa461;font-weight:700;margin-bottom:6px}
.start-inner .title{font-size:48px;margin:0 0 24px 0;color:#fff;text-shadow:0 2px 0 #f6a93b, 0 4px 0 #e16f1a, 0 6px 12px rgba(0,0,0,.25)}
.start-inner .title span{color:#ffd559}
.play-btn{position:absolute;left:56px;top:220px;width:140px;height:130px;border:none;background:transparent;cursor:pointer}
.play-btn .label{position:absolute;left:50%;top:56%;transform:translate(-50%,-50%);color:#fff;font-weight:800;font-size:22px;text-shadow:0 2px 0 rgba(0,0,0,.25);z-index:4}
/* 사과 본체 (하단 원형 부분) */
.play-btn:after{content:"";position:absolute;left:50%;top:58%;transform:translate(-50%,-50%);width:120px;height:110px;background:#e21712;border-radius:60px 60px 56px 56px/58px 58px 54px 54px;box-shadow:inset 0 -12px 0 rgba(0,0,0,.16),0 12px 20px rgba(0,0,0,.25);z-index:1}
/* 윗쪽 좌/우 로브(볼록) */
.play-btn .lobe{position:absolute;top:18px;width:64px;height:56px;background:#e21712;box-shadow:inset 0 -8px 0 rgba(0,0,0,.12);z-index:2}
.play-btn .lobe.l{left:32px;border-top-left-radius:36px 30px;border-top-right-radius:26px 20px;border-bottom-left-radius:28px;border-bottom-right-radius:28px;transform:rotate(-8deg)}
.play-btn .lobe.r{right:32px;border-top-right-radius:36px 30px;border-top-left-radius:26px 20px;border-bottom-left-radius:28px;border-bottom-right-radius:28px;transform:rotate(8deg)}
/* 잎 */
.play-btn .leaf{position:absolute;top:-6px;left:84px;width:48px;height:26px;background:#2f7d3a;border-radius:26px;transform:rotate(-28deg);box-shadow:0 1px 0 rgba(0,0,0,.18);z-index:3}
/* 줄기 */
.play-btn .stem{position:absolute;top:-10px;left:70px;width:10px;height:26px;background:#3a2a1f;border-radius:6px;transform:rotate(-12deg);box-shadow:inset 0 -3px 0 rgba(0,0,0,.2);z-index:3}
/* 광택 */
.play-btn::before{content:"";position:absolute;left:96px;top:46px;width:22px;height:22px;background:rgba(255,255,255,.36);border-radius:50%;filter:blur(.2px);z-index:3}
.play-btn:focus{outline:3px solid #ffd54a;outline-offset:6px;border-radius:12px}

/* 점수 팝업 (검은색 테두리, 살짝 나타났다 사라짐) */
.score-float{position:absolute;z-index:10;padding:4px 8px;border:2px solid #111;border-radius:8px;background:rgba(255,255,255,.9);color:#111;font-weight:800;pointer-events:none;transform:translate(-50%, -50%);opacity:0;animation:score-pop .9s ease-out forwards}
@keyframes score-pop{0%{opacity:0;transform:translate(-50%,-50%) scale(.9)}15%{opacity:1;transform:translate(-50%,-62%) scale(1)}70%{opacity:1;transform:translate(-50%,-66%) scale(1)}100%{opacity:0;transform:translate(-50%,-78%) scale(.98)}}

/* 드래그 사각형: 시각과 히트 테스트를 동일 좌표계로 맞춤 */
.drag-rect{position:absolute;border:2px solid #111;box-sizing:border-box;border-radius:6px;background:rgba(0,0,0,.06);pointer-events:none}

/* 규칙 영역 타이포 조정 */
.rules h3{margin:8px 0 6px 0}
.rules ul{margin:6px 0 0 16px;padding:0}
.rules li{margin:4px 0}

.demo-apples{position:absolute;right:80px;top:160px;display:grid;grid-template-columns:repeat(4,56px);gap:16px}
.hidden{display:none}

.modal{border:none;border-radius:12px;padding:18px 18px 12px;max-width:520px}
.modal::backdrop{background:rgba(0,0,0,.35)}

/* Vertical timer bar placed to the right of the board */
.time-rail{position:relative;width:12px;height:480px;border-radius:8px;background:rgba(0,0,0,.08);box-shadow:inset 0 0 0 2px rgba(0,0,0,.08)}
.time-fill{position:absolute;left:0;bottom:0;width:100%;height:100%;background:linear-gradient(180deg, #5fd38a, #2aa461);border-radius:8px;transition:height .25s linear}


